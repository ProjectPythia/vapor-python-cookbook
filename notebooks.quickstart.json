{"version":2,"kind":"Notebook","sha256":"f9bf128d1d065aab3ac444c210dd1b8d699d43a416231b9341a78354ff514044","slug":"notebooks.quickstart","location":"/notebooks/quickstart.ipynb","dependencies":[],"frontmatter":{"title":"Quickstart","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"vapor","language":"python"},"authors":[{"nameParsed":{"literal":"Project Pythia Community","given":"Project Pythia","family":"Community"},"name":"Project Pythia Community","url":"https://projectpythia.org/","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true},"code":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true}},"github":"https://github.com/projectpythia/vapor-python-cookbook","copyright":"2024","affiliations":[{"id":"University at Albany (State University of New York)","name":"University at Albany (State University of New York)"},{"id":"UCAR/NCAR","name":"UCAR/NCAR"}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/vapor-python-cookbook/blob/main/notebooks/quickstart.ipynb","exports":[{"format":"ipynb","filename":"quickstart.ipynb","url":"/vapor-python-cookbook/build/quickstart-60776735a2f9101043050f08f747cc9c.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This guide aims to help new users get started with VAPOR’s Python API, showcasing a typical workflow using an example dataset. We will cover some of the key features of the VAPOR API, and explain some of the essential concepts specific to 3D visualization in VAPOR.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DYEpv3wsmX"}],"key":"YSmfOMUSMw"}],"key":"WJix6bPHi4"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Creating visualization in VAPOR can be divided into 4 steps, which we will go through in this notebook.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BWZVjnsQsg"}],"key":"w1ljh8XwNy"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Import Data","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"e4T3igGMSq"}],"key":"RPToE1aU2K"}],"key":"IXxW9B6ZRi"}],"key":"MvvoPGLxqF"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"strong","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Select and Apply Renderers","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"jZnLvMF4rj"}],"key":"E7W5CDi69L"}],"key":"iIVuYDCYEa"}],"key":"cPTlkPwIA4"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Annotate","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"owsxtOhFmZ"}],"key":"AZiZLmv3xh"}],"key":"rQs4byEEf6"}],"key":"gIbBZ9mNKN"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Export","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"qGmPBVJ3vt"}],"key":"g6TKNZ61Y5"}],"key":"Zch4mhGTXK"}],"key":"LfECPbOycV"}],"key":"cAnDP3dUlb"}],"key":"CC1gY108wq"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Setup","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YQUQW5NLoG"}],"identifier":"setup","label":"Setup","html_id":"setup","implicit":true,"key":"yhXaAOl0tA"}],"key":"P1qokDAsPO"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Import VAPOR","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bZYqatOBAE"}],"identifier":"import-vapor","label":"Import VAPOR","html_id":"import-vapor","implicit":true,"key":"E3UFQnnim7"}],"key":"LbpTlQH0xS"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"To begin, we will import the vapor modules we will be using.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"u6OASGVNFH"}],"key":"NlJnHiqFPz"}],"key":"Iid3pswg9z"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from vapor import session, renderer, dataset\nfrom vapor.animation import Animation\nfrom vapor.dataset import Dataset","key":"EAq4YHDWKT"},{"type":"output","id":"EEEJ69j1Vies_dsuDqONL","data":[{"output_type":"error","traceback":"\u001b[31m---------------------------------------------------------------------------\u001b[39m\n\u001b[31mModuleNotFoundError\u001b[39m                       Traceback (most recent call last)\n\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[1]\u001b[39m\u001b[32m, line 1\u001b[39m\n\u001b[32m----> \u001b[39m\u001b[32m1\u001b[39m \u001b[38;5;28;01mfrom\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mvapor\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[38;5;28;01mimport\u001b[39;00m session, renderer, dataset\n\u001b[32m      2\u001b[39m \u001b[38;5;28;01mfrom\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mvapor\u001b[39;00m\u001b[34;01m.\u001b[39;00m\u001b[34;01manimation\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[38;5;28;01mimport\u001b[39;00m Animation\n\u001b[32m      3\u001b[39m \u001b[38;5;28;01mfrom\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mvapor\u001b[39;00m\u001b[34;01m.\u001b[39;00m\u001b[34;01mdataset\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[38;5;28;01mimport\u001b[39;00m Dataset\n\n\u001b[31mModuleNotFoundError\u001b[39m: No module named 'vapor'","ename":"ModuleNotFoundError","evalue":"No module named 'vapor'"}],"key":"Jo2I8EeJab"}],"key":"KV2GSVbEvh"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Initialize Session","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ahhhOXtXqx"}],"identifier":"initialize-session","label":"Initialize Session","html_id":"initialize-session","implicit":true,"key":"dtSFku71R2"}],"key":"sZiEbd0KBe"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"3D visualizations in VAPOR are managed using ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qn1xatpi4c"},{"type":"link","url":"https://ncar.github.io/VaporDocumentationWebsite/pythonAPIReference/userModules/vapor.session.html","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"sessions","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Z8oHy8RjGf"}],"urlSource":"https://ncar.github.io/VaporDocumentationWebsite/pythonAPIReference/userModules/vapor.session.html","key":"IUQj0eZcVG"},{"type":"text","value":". A session captures all the necessary information to recreate a visualization, including dataset details, rendering settings, and camera positions. In this notebook, we’ll create a new visualization within a session. Later, we can save this session to a file, allowing it to be opened in VAPOR’s GUI application or another Python script.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ab9Xmm5EwS"}],"key":"USYfj6d30I"}],"key":"SEzPkxj1OD"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ses = session.Session()","key":"L7e7nS2xw6"},{"type":"output","id":"J_JTTX95B009XzVJXaOv-","data":[],"key":"kaRe0YwixA"}],"key":"G54nobL36T"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Load Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"akijTEoUdN"}],"identifier":"load-data","label":"Load Data","html_id":"load-data","implicit":true,"key":"RLBLYZEN66"}],"key":"BA1pFfUqqB"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Once we’ve created our session, we’ll want to load our dataset. Vapor supports a number of scientific data formats, which can be viewed with ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UvhNGAMZ08"},{"type":"inlineCode","value":"Dataset.GetDatasetTypes()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hV5LHbM9L9"}],"key":"GlOwWIFYcL"}],"key":"TrTdKD5Ybe"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"Dataset.GetDatasetTypes()","key":"D3XMHXMLoP"},{"type":"output","id":"FrfogMc7Y-LOmknUHSaZ5","data":[],"key":"tgLFLb79UT"}],"key":"plHbwfwdUe"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In this example, we will be using data from the WRF model of Hurricane Katrina from 2005. The following cell will download the data from NCAR’s ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QzuZ1k4dzb"},{"type":"link","url":"https://rda.ucar.edu/datasets/ds897.7/dataaccess/#","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Research Data Archives","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jgPyEGW3WM"}],"urlSource":"https://rda.ucar.edu/datasets/ds897.7/dataaccess/#","key":"k6in1u6K3x"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mJUd5XKDsp"}],"key":"jeQSlxfiK7"}],"key":"M1cWpGiT5H"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import os\nimport requests\nimport zipfile\nurl = 'https://data.rda.ucar.edu/ds897.7/Katrina.zip'\nextract_to = './data'\nzip_name = \"Katrina.zip\"\ndata_file = './data/wrfout_d02_2005-08-29_02.nc'\n\n# Check if the data file already exists\nif not os.path.exists(data_file):\n    # Download zip\n    with requests.get(url, stream=True) as r:\n        r.raise_for_status()\n        with open(zip_name, 'wb') as f:\n            for chunk in r.iter_content(chunk_size=8192):\n                f.write(chunk)\n    # Extract the file\n    with zipfile.ZipFile(zip_name, 'r') as zip_ref:\n        zip_ref.extractall(extract_to)\n\n    # Clean up the zip file\n    os.remove(zip_name)\n\n    print(f\"Data downloaded and extracted to {data_file}\")\nelse:\n    print(f\"Data file already exists at {data_file}, skipping download and extraction.\")\n","key":"VvqfyRZXlL"},{"type":"output","id":"9cDaoz5ZGax_5Ap64Vho_","data":[],"key":"bGkpkpEmvX"}],"key":"DHOYUkMMGw"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"To load the dataset into our session, we use ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"o3ESZn7Bks"},{"type":"inlineCode","value":"ses.OpenDataset()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xCXRJDQ3yc"},{"type":"text","value":", which requires two parameters. The first parameter specifies the file format, in this case, dataset.WRF. The second parameter is a list of file paths. Since we only have one file, we provide a list containing just that file.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Fm7MTZuCFI"}],"key":"FVFZGYevtw"}],"key":"XjqwhD2hEd"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"data = ses.OpenDataset(dataset.WRF, [\"data/wrfout_d02_2005-08-29_02.nc\"])","key":"PU5QeLaibx"},{"type":"output","id":"X6s1Sj8CUznlYuU7JI6vW","data":[],"key":"pBrEGrZH5p"}],"key":"GtAfkgrbuN"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The dataset contains a number of atmospheric variables that describe attributes of the storm, such as pressure, wind, clouds, and rain. For this example, we will use three variables: ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DXkgA0kSWz"},{"type":"inlineCode","value":"U10","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JleYc97l7E"},{"type":"text","value":", a 2 dimensional variable that describes the 10 meter zonal wind speed, ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"k2oORR9WZD"},{"type":"inlineCode","value":"QCLOUD","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NP1V7G94eM"},{"type":"text","value":", a 3 dimensional variable to visualize the cloud formation of the storm, and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ttYJQYYtxZ"},{"type":"inlineCode","value":"HGT","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lcJaSapZYY"},{"type":"text","value":", a 2D variable to visualize the topography of the land. Below we will display the metadata for these variables.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"e1fnZI6n9L"}],"key":"LtBIhN4uKT"}],"key":"W0GetUlOsl"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(\"Data Variables:\")\nvars = [\"U10\", \"QCLOUD\", \"HGT\"]\nfor var in data.GetDataVarNames():\n    if var in vars:\n        print(f\" {var}\")\n        print(f\"    Time Varying: False\")\n        print(f\"    Dimensionality:\", data.GetVarGeometryDim(var))\n        print(f\"    Coordinates:\", data.GetVarCoordVars(var, True))\n        print(\"     Data Range:\", data.GetDataRange(var))","key":"eueCbKhLyr"},{"type":"output","id":"8yebjr7UuXx5v9ngBSLPP","data":[],"key":"yL0AbaOEhl"}],"key":"RzEIY0zT73"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Apply Renderers","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bEtS6iLmVk"}],"identifier":"apply-renderers","label":"Apply Renderers","html_id":"apply-renderers","implicit":true,"key":"KmKCNKrqwr"}],"key":"LMlHzx3kir"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now that we’ve loaded our data, it’s time to start the visualization process. Visualization in Vapor is based around renderers, which display data with customizable colors and opacities. Tutorials for using renderers in Vapor’s GUI can be found ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iMqdoyKzJ7"},{"type":"link","url":"https://ncar.github.io/VaporDocumentationWebsite/vaporApplicationReference/renderers.html","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iPacyW35b0"}],"urlSource":"https://ncar.github.io/VaporDocumentationWebsite/vaporApplicationReference/renderers.html","key":"cflnoBFbfs"},{"type":"text","value":", and each one works similarly in Python. In this example, we’ll create a 2D data renderer and a volume renderer.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PfwMIjxozJ"}],"key":"p3ZQXKut4k"}],"key":"E7eoBYBMWe"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Image Renderer","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tbwWYq4sIO"}],"identifier":"image-renderer","label":"Image Renderer","html_id":"image-renderer","implicit":true,"key":"AJSuL9R4OK"}],"key":"HOPM6LaTr9"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We will start by creating an image renderer to display the topography of the land. This dataset is georeferenced, so we can use Vapor’s builtin image simply by calling ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"p63zvGwBkV"},{"type":"inlineCode","value":"data.NewRenderer(renderer.ImageRenderer)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GnnRhoztnD"},{"type":"text","value":". Additionally, our dataset stores the elevation at each gridpoint in ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uA0CKYJCw1"},{"type":"inlineCode","value":"HGT","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XKqcU8wnQe"},{"type":"text","value":", and by linking this to our image renderer with ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WJIjZyNkIu"},{"type":"inlineCode","value":"land.SetHeightVariableName(\"HGT\")","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"x0IlmE0JJx"},{"type":"text","value":" we can render the topography in 3D.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"k9j2DPPmqt"}],"key":"KspoERnK7p"}],"key":"QY0PAcpfDx"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"land = data.NewRenderer(renderer.ImageRenderer)\nland.SetHeightVariableName(\"HGT\")","key":"tD37F4rqOW"},{"type":"output","id":"b2Gaetjw7q-k5dy5mPA4S","data":[],"key":"vrtWdZ1jxB"}],"key":"bnmYgC80hn"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now, we can call ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZasDNYc3ZL"},{"type":"inlineCode","value":"ses.Show()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zr5YWoo8Cp"},{"type":"text","value":" to display our visualization!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GlXzS3DhcR"}],"key":"Ddm4rHvUPE"}],"key":"qXhKvBq8uH"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ses.Show()","key":"AFzwmcV8vo"},{"type":"output","id":"MLzb7sQh6T4Qif_NOsHmz","data":[],"key":"iVYWXqs5kF"}],"key":"KDuYtPQ37d"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2D Data Renderer","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"U23xafqAUz"}],"identifier":"id-2d-data-renderer","label":"2D Data Renderer","html_id":"id-2d-data-renderer","implicit":true,"key":"KjKAJUSR7M"}],"key":"vx68F3C2jS"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The 2D Data Renderer displays a 2D data variable along the plane described by the dataset. We will use it to display our U10 variable, which represents the east/west wind speed at a 10-meter elevation. First, we select the renderer type by calling ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"p6ASJF3Fmm"},{"type":"inlineCode","value":"NewRenderer()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UG40PXSkfQ"},{"type":"text","value":" on the dataset. Next, we specify the variable to visualize by calling ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"l2hDVjXIMr"},{"type":"inlineCode","value":"SetVariableName()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KU2neLlzda"},{"type":"text","value":" on the renderer.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"daAaH5kYLT"}],"key":"DPlRSx5fl1"}],"key":"FmI3hozzVQ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"wind = data.NewRenderer(renderer.TwoDDataRenderer)\nwind.SetVariableName(\"U10\")","key":"VPiPlbnWdR"},{"type":"output","id":"M9WctR5tf5ey-arCOTzOn","data":[],"key":"rD0Kfn4Zso"}],"key":"U6vYXOVHpO"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If our image and 2D data renderers are too close to each other, it can lead to unexpected results. To prevent this, we’ll lift our image renderer slightly off the ground. We can achieve this by using ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XpHtIcBegY"},{"type":"inlineCode","value":"GetTransform()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gTNgwCFz15"},{"type":"text","value":" and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"b232Sxlet6"},{"type":"inlineCode","value":"SetTranslations()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SiUFFMpjLa"},{"type":"text","value":" as follows.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"B5jEZq44fs"}],"key":"k3r50jMQZG"}],"key":"J1Xx309Tu8"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"land_transform = land.GetTransform()\nland_transform.SetTranslations([0, 0, 100])","key":"YFk3eHQpq3"},{"type":"output","id":"RH5MnhAWF3Db0gTjaMHXg","data":[],"key":"xsHkw7irD7"}],"key":"b7kKUAjoP7"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ses.Show()","key":"s5hmBhardx"},{"type":"output","id":"GxbTldqR_iAJAMEOxeHtu","data":[],"key":"ZAU7NcZ5yS"}],"key":"BOJg9YiGCR"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Volume Renderer","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VQRWXxrKwZ"}],"identifier":"volume-renderer","label":"Volume Renderer","html_id":"volume-renderer","implicit":true,"key":"q7dc1fhIaV"}],"key":"T4u1KgkYNj"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Next, let’s create a visualization for a three dimensional variable. The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ySJl48O1Q1"},{"type":"inlineCode","value":"QCLOUD","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NJjkZsAOny"},{"type":"text","value":" variable measures the cloud density at every gridpoint. We can use a volume renderer to display where the clouds are thickest. As before, we first select our renderer and variable name.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"veqefRQwCq"}],"key":"sffvjyI24C"}],"key":"DiJYOWBCf4"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"clouds = data.NewRenderer(renderer.VolumeRenderer)\nclouds.SetVariableName(\"QCLOUD\")","key":"brZPCyVm8n"},{"type":"output","id":"hygySYCGYOY1nzIV_yC2A","data":[],"key":"kSXmjUPJSu"}],"key":"O9VGqwCZcS"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can adjust the appearance of our renderer by modifying its ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"n4UkGLl5Fp"},{"type":"link","url":"https://ncar.github.io/VaporDocumentationWebsite/vaporApplicationReference/basicRendererControls.html#appearancetab","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"transfer function","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BUNs40ObtY"}],"urlSource":"https://ncar.github.io/VaporDocumentationWebsite/vaporApplicationReference/basicRendererControls.html#appearancetab","key":"eB617P42Ki"},{"type":"text","value":", which describes the color and opacity of the data in the visualization. The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"T6LD4DZAJP"},{"type":"link","url":"https://projectpythia.org/vapor-python-cookbook/notebooks/transfer_function_example.html","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"transfer function notebook","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Pp5nWaDues"}],"urlSource":"https://projectpythia.org/vapor-python-cookbook/notebooks/transfer_function_example.html","key":"CFNGJswvI3"},{"type":"text","value":" provides more examples on how to customize a transfer function.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"W8KznSoxcu"}],"key":"HleJvYDsRn"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"First, we will set the colors to a white-gray-black scale. Then, we will adjust the opacities of the renderer. We want areas with almost no clouds to be completely transparent, while areas with more clouds should be more opaque. We use ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LBomR0unaU"},{"type":"inlineCode","value":"SetOpacityControlPoints","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"beyOTYBgrW"},{"type":"text","value":" with a list of [value, opacity] pairs to specify the opacity of data points with a certain value.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LOVGFO654k"}],"key":"O2LbAzTH15"}],"key":"Yy2Ivl336h"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"clouds_tf = clouds.GetTransferFunction(\"QCLOUD\")\n# Load built in black to white colormap\nclouds_tf.LoadBuiltinColormap(\"Sequential/BlackWhite\")\n# Access and reverse RGB list from current color map\nnew_colors = [(r, g, b) for r, g, b, _ in list(reversed(clouds_tf.GetMatPlotLibColormap().colors))]\n# Assign new RGB colors to transfer function\nclouds_tf.SetColorRGBList(new_colors)\n# Change opacities\nclouds_tf.SetOpacityControlPoints([[0,0],[0.00001,0.01], [0.0001, 0.1], [0.0010,0.9]])","key":"R4uKmuvTYL"},{"type":"output","id":"hjvCieAvnSm8iAZxqSPc4","data":[],"key":"x5VGiIpB6x"}],"key":"ZkmPGcoqvE"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"To visualize the 3D structure of the clouds effectively, we need to set the camera at an appropriate angle. The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ximfnN5lMR"},{"type":"link","url":"https://ncar.github.io/VaporDocumentationWebsite/pythonAPIReference/userModules/vapor.camera.html","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"camera module","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CpZPezlVCz"}],"urlSource":"https://ncar.github.io/VaporDocumentationWebsite/pythonAPIReference/userModules/vapor.camera.html","key":"R2l77Qq1D8"},{"type":"text","value":" in VAPOR offers several functions for controlling the camera’s position and orientation. Among these, the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rXVXKN65Jx"},{"type":"inlineCode","value":"LookAt()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dtoce8YISi"},{"type":"text","value":" function is the most robust and versatile. It takes two lists, each containing three elements representing a point in 3D space with (X, Y, Z) coordinates. The first list specifies the camera’s position, while the second list defines the point the camera is targeting.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZgpAjkmDKx"}],"key":"tubPeSPSxb"}],"key":"O294XWxZrh"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ses.GetCamera().LookAt(\n    [-757400, 2189800, 761600], # Position\n    [-420800, 2737200, 15700]   # Target\n    )\nses.Show()","key":"OEpvHBO70v"},{"type":"output","id":"c8Oy_BT0cU2xIs2_dlb5J","data":[],"key":"ULQrV9F3w9"}],"key":"wQbfgM0wBw"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Add Annotations","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dOzG6HxuSO"}],"identifier":"add-annotations","label":"Add Annotations","html_id":"add-annotations","implicit":true,"key":"ZQ9MZVJisG"}],"key":"TZ3n3cxWX8"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can finalize our visualization with some ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"maRPDuP8hY"},{"type":"link","url":"https://ncar.github.io/VaporDocumentationWebsite/pythonAPIReference/userModules/vapor.annotations.html","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"annotations","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"B6clPvEspq"}],"urlSource":"https://ncar.github.io/VaporDocumentationWebsite/pythonAPIReference/userModules/vapor.annotations.html","key":"P6E9MhwL24"},{"type":"text","value":". For a more in depth tutorial on annotations, visit our ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"x2XjyA0Uii"},{"type":"link","url":"https://projectpythia.org/vapor-python-cookbook/notebooks/annotation_example.html","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"annotation cookbook","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"owIpooIvwT"}],"urlSource":"https://projectpythia.org/vapor-python-cookbook/notebooks/annotation_example.html","key":"O7x7dC07CN"},{"type":"text","value":". Here, we’ll add a colorbar for our wind variable and axis arrows to help with orientation.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GBmdlTlO1L"}],"key":"nBfB5W0fsY"}],"key":"jo6paXoIeN"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"colorbar = wind.GetColorbarAnnotation()\ncolorbar.SetEnabled(True)\ncolorbar.SetCornerPosition((1,1))\n\nscene = ses.GetSceneAnnotations()\nscene.SetAxisArrowEnabled(True)\n\nses.Show()","key":"njVRYZp0Ry"},{"type":"output","id":"npi_t_vPR89OIrJBRhvcL","data":[],"key":"nRelIuzhkI"}],"key":"TV8KWBsQDI"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We can also generate an interactive visual using Vapor’s jupyter widget. This allows you to move the camera around as if you were using the Vapor application.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"E4AAr2UJrh"},{"type":"break","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xQy3nFm49W"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note: This widget requires an active kernel to operate. To try it out, run this notebook on your local machine.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OrP3lhhC34"}],"key":"xvX6UP2mVC"}],"key":"nA0c7a9I8y"}],"key":"smhfj3cJai"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from vapor import widget\nviz = widget.VaporVisualizerWidget(ses)\nviz","key":"TyDBSSGX8Y"},{"type":"output","id":"RnwNr70zdao6AIVeGAsZ-","data":[],"key":"tp8Mt5cbBV"}],"key":"jSflH6XrVT"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Export","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BH0oKUk74k"}],"identifier":"export","label":"Export","html_id":"export","implicit":true,"key":"TcnQQudg32"}],"key":"VyP9mJZRAT"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now that we’ve created our visualization, we’ll want to save and export it. We can save visualization as a png, jpg, or tif using ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GEjRUk7eqg"},{"type":"inlineCode","value":"ses.Render()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FRZhGjgVM3"}],"key":"KaOcA2PWED"}],"key":"B5Fwc8zSPV"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ses.Render(\"Katrina.tif\")","key":"wiHwOTy69K"},{"type":"output","id":"YVmBWM1S3y-aPGXHJQy04","data":[],"key":"seSgEIuwng"}],"key":"lsEYJ8XiM4"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can also use ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"T1ePACY6fm"},{"type":"inlineCode","value":"ses.Save()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"neqgbMs6Gk"},{"type":"text","value":" to save our session to a file. We can load this file in a different python script or in the Vapor GUI.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QBxM5qyXZh"}],"key":"ckTnhXhWOW"}],"key":"H6pRkfCVbV"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ses.Save(\"Katrina.vs3\")","key":"ygXb0lwfOn"},{"type":"output","id":"k1o6efBi2T3CEma5hXnnG","data":[],"key":"mHce8TKpOt"}],"key":"JTi7xDUXJ8"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"To access this session in a different Python script, we can use a line like this:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"J3SnYu8k0N"}],"key":"UpV08Fcxfs"}],"key":"sNScBsjegk"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ses = session.Session()\nses.Load(\"Katrina.vs3\")","key":"J5cHP9RZzi"},{"type":"output","id":"nKHkfWEpLYtVB7exj273u","data":[],"key":"rJsvqU3jDS"}],"key":"KmBr7MWhhG"}],"key":"p38PSui51O"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"How to Cite This Cookbook","url":"/notebooks/how-to-cite","group":"Preamble"},"next":{"title":"Opening Datasets","url":"/notebooks/dataset-example","group":"Foundations of VAPOR Python"}}},"domain":"http://localhost:3000"}